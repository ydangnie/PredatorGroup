<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airpods Animation | @coding.stella</title>
    @vite(['resources/css/layout/main.css', 'resources/js/layout/main.js'])
</head>

<div class="carousel">
<div class="list">
        <div class="item">
        <img src="{{ asset('storage/images/img1.png') }}" alt="·∫¢nh t·ª´ Drive">
            <div class="introduce">
                <div class="title">THEOREMA | BLACK GOLD</div>
                <div class="topic">CASABLANCA</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
        </div>

        <div class="item">
            <img src="{{ asset('storage/images/img2.png') }}">
            <div class="introduce">
                <div class="title">THEOREMA | RED</div>
                <div class="topic">AMSTERDAM</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
        </div>

        <div class="item">
            <img src="{{ asset('storage/images/img3.png') }}">
            <div class="introduce">
                <div class="title">THEOREMA | GREEN</div>
                <div class="topic">CASABLANCA</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
            <div class="detail">
                <div class="title">Airpod GHTK</div>
                <div class="des">
                    <!-- lorem 50 -->
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, reiciendis suscipit nobis nulla animi, modi explicabo quod corrupti impedit illo, accusantium in eaque nam quia adipisci aut distinctio porro eligendi. Reprehenderit nostrum consequuntur ea! Accusamus architecto dolores modi ducimus facilis quas voluptatibus! Tempora ratione accusantium magnam nulla tenetur autem beatae.
                </div>
                <div class="specifications">
                    <div>
                        <p>Used Time</p>
                        <p>6 hours</p>
                    </div>
                    <div>
                        <p>Charging port</p>
                        <p>Type-C</p>
                    </div>
                    <div>
                        <p>Compatible</p>
                        <p>Android</p>
                    </div>
                    <div>
                        <p>Bluetooth</p>
                        <p>5.3</p>
                    </div>
                    <div>
                        <p>Controlled</p>
                        <p>Touch</p>
                    </div>
                </div>
                <div class="checkout">
                    <button>ADD TO CART</button>
                    <button>CHECKOUT</button>
                </div>
            </div>
        </div>

        <div class="item">
            <img src="{{ asset('storage/images/img4.png') }}">
            <div class="introduce">
                <div class="title">THEOREMA | ORANGE</div>
                <div class="topic">CASABLANCA</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
            <div class="detail">
                <div class="title">Airpod GHTK</div>
                <div class="des">
                    <!-- lorem 50 -->
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, reiciendis suscipit nobis nulla animi, modi explicabo quod corrupti impedit illo, accusantium in eaque nam quia adipisci aut distinctio porro eligendi. Reprehenderit nostrum consequuntur ea! Accusamus architecto dolores modi ducimus facilis quas voluptatibus! Tempora ratione accusantium magnam nulla tenetur autem beatae.
                </div>
                <div class="specifications">
                    <div>
                        <p>Used Time</p>
                        <p>6 hours</p>
                    </div>
                    <div>
                        <p>Charging port</p>
                        <p>Type-C</p>
                    </div>
                    <div>
                        <p>Compatible</p>
                        <p>Android</p>
                    </div>
                    <div>
                        <p>Bluetooth</p>
                        <p>5.3</p>
                    </div>
                    <div>
                        <p>Controlled</p>
                        <p>Touch</p>
                    </div>
                </div>
                <div class="checkout">
                    <button>ADD TO CART</button>
                    <button>CHECKOUT</button>
                </div>
            </div>
        </div>

        <div class="item">
            <img src="{{ asset('storage/images/img5.png') }}">
            <div class="introduce">
                <div class="title">THEOREMA | SILVER</div>
                <div class="topic">CASABLANCA</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
            <div class="detail">
                <div class="title">Airpod</div>
                <div class="des">
                    <!-- lorem 50 -->
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, reiciendis suscipit nobis nulla animi, modi explicabo quod corrupti impedit illo, accusantium in eaque nam quia adipisci aut distinctio porro eligendi. Reprehenderit nostrum consequuntur ea! Accusamus architecto dolores modi ducimus facilis quas voluptatibus! Tempora ratione accusantium magnam nulla tenetur autem beatae.
                </div>
                <div class="specifications">
                    <div>
                        <p>Used Time</p>
                        <p>6 hours</p>
                    </div>
                    <div>
                        <p>Charging port</p>
                        <p>Type-C</p>
                    </div>
                    <div>
                        <p>Compatible</p>
                        <p>Android</p>
                    </div>
                    <div>
                        <p>Bluetooth</p>
                        <p>5.3</p>
                    </div>
                    <div>
                        <p>Controlled</p>
                        <p>Touch</p>
                    </div>
                </div>
                <div class="checkout">
                    <button>ADD TO CART</button>
                    <button>CHECKOUT</button>
                </div>
            </div>
        </div>

        <div class="item">
            <img src="{{ asset('storage/images/img6.png') }}">
            <div class="introduce">
                <div class="title">THEOREMA | GOLD</div>
                <div class="topic">CASABLANCA</div>
                <div class="des">
                    <!-- 20 lorem -->
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Officia, laborum cumque dignissimos quidem atque et eligendi aperiam voluptates beatae maxime.
                </div>
                <button class="seeMore">SEE MORE &#8599</button>
            </div>
            <div class="detail">
                <div class="title">Airpod GHTK</div>
                <div class="des">
                    <!-- lorem 50 -->
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor, reiciendis suscipit nobis nulla animi, modi explicabo quod corrupti impedit illo, accusantium in eaque nam quia adipisci aut distinctio porro eligendi. Reprehenderit nostrum consequuntur ea! Accusamus architecto dolores modi ducimus facilis quas voluptatibus! Tempora ratione accusantium magnam nulla tenetur autem beatae.
                </div>
                <div class="specifications">
                    <div>
                        <p>Used Time</p>
                        <p>6 hours</p>
                    </div>
                    <div>
                        <p>Charging port</p>
                        <p>Type-C</p>
                    </div>
                    <div>
                        <p>Compatible</p>
                        <p>Android</p>
                    </div>
                    <div>
                        <p>Bluetooth</p>
                        <p>5.3</p>
                    </div>
                    <div>
                        <p>Controlled</p>
                        <p>Touch</p>
                    </div>
                </div>
                <div class="checkout">
                    <button>ADD TO CART</button>
                    <button>CHECKOUT</button>
                </div>
            </div>
        </div>
    </div>
     <div class="arrows">
            <button id="prev"><</button>
            <button id="next">></button>
            <button id="back">See All  &#8599</button>
        </div>
</div>
<div id="chatbot-ui" style="position: fixed; bottom: 30px; right: 30px; z-index: 9999; font-family: sans-serif;">
    <button id="toggle-chat" style="width: 60px; height: 60px; border-radius: 50%; background: #000; color: #fff; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.2); font-size: 24px;">
        üí¨
    </button>

    <div id="chat-box" style="display: none; position: absolute; bottom: 80px; right: 0; width: 350px; height: 450px; background: #fff; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); flex-direction: column; overflow: hidden; border: 1px solid #eee;">
        <div style="background: #000; color: #fff; padding: 15px; display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: bold;">PREDATOR CHATBOT</span>
            <span id="close-chat" style="cursor: pointer; font-size: 20px;">&times;</span>
        </div>

        <div id="messages" style="flex: 1; padding: 15px; overflow-y: auto; background: #f8f9fa; display: flex; flex-direction: column; gap: 10px;">
            <div style="background: #e9ecef; padding: 8px 12px; border-radius: 15px; align-self: flex-start; max-width: 80%;">
                Ch√†o b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n v·ªÅ th·ªùi trang Azalman h√¥m nay?
            </div>
        </div>

        <div style="padding: 15px; border-top: 1px solid #eee; display: flex; gap: 10px;">
            <input type="text" id="user-input" placeholder="Nh·∫≠p c√¢u h·ªèi..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none;">
            <button id="send-btn" style="background: #000; color: #fff; border: none; padding: 10px 15px; border-radius: 20px; cursor: pointer;">‚û§</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const toggleBtn = document.getElementById('toggle-chat');
    const chatBox = document.getElementById('chat-box');
    const closeBtn = document.getElementById('close-chat');
    const sendBtn = document.getElementById('send-btn');
    const userInput = document.getElementById('user-input');
    const messages = document.getElementById('messages');

    // ·∫®n/Hi·ªán chat
    toggleBtn.addEventListener('click', () => chatBox.style.display = 'flex');
    closeBtn.addEventListener('click', () => chatBox.style.display = 'none');

    // X·ª≠ l√Ω g·ª≠i tin nh·∫Øn
    function sendMessage() {
        const text = userInput.value.trim();
        if (!text) return;

        // Hi·ªán tin nh·∫Øn ng∆∞·ªùi d√πng
        appendMessage(text, 'user');
        userInput.value = '';

        // Hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang g√µ...
        const loadingDiv = document.createElement('div');
        loadingDiv.textContent = 'ƒêang tr·∫£ l·ªùi...';
        loadingDiv.style.fontSize = '12px';
        loadingDiv.style.color = '#888';
        loadingDiv.style.marginLeft = '15px';
        messages.appendChild(loadingDiv);

        // G·ª≠i API l√™n Server Laravel
        fetch('{{ route("chat.ai") }}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRF-TOKEN': '{{ csrf_token() }}' // Token b·∫£o m·∫≠t c·ªßa Laravel
            },
            body: JSON.stringify({ message: text })
        })
        .then(res => res.json())
        .then(data => {
            messages.removeChild(loadingDiv);
            appendMessage(data.reply, 'ai');
        })
        .catch(err => {
            messages.removeChild(loadingDiv);
            appendMessage('C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i.', 'ai');
        });
    }

    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendMessage();
    });

    function appendMessage(text, sender) {
        const div = document.createElement('div');
        div.textContent = text;
        div.style.padding = '8px 12px';
        div.style.borderRadius = '15px';
        div.style.maxWidth = '80%';
        div.style.wordWrap = 'break-word';

        if (sender === 'user') {
            div.style.background = '#000'; // M√†u ƒëen theo th∆∞∆°ng hi·ªáu
            div.style.color = '#fff';
            div.style.alignSelf = 'flex-end';
        } else {
            div.style.background = '#e9ecef';
            div.style.color = '#000';
            div.style.alignSelf = 'flex-start';
        }
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight; // T·ª± cu·ªôn xu·ªëng d∆∞·ªõi
    }
});
</script>